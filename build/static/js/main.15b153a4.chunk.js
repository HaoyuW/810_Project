(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{186:function(t,e,n){t.exports=n(469)},191:function(t,e,n){},193:function(t,e,n){t.exports=n.p+"static/media/logo.5d5d9eef.svg"},194:function(t,e,n){},204:function(t,e){},213:function(t,e){},231:function(t,e){},233:function(t,e){},250:function(t,e){},251:function(t,e){},253:function(t,e){},254:function(t,e){},327:function(t,e){},329:function(t,e){},338:function(t,e){},340:function(t,e){},365:function(t,e){},367:function(t,e){},373:function(t,e){},374:function(t,e){},377:function(t,e){},393:function(t,e){},396:function(t,e){},401:function(t,e){},413:function(t,e){},414:function(t,e){},416:function(t,e){},469:function(t,e,n){"use strict";n.r(e);var a=n(14),r=n.n(a),s=n(184),o=n.n(s),c=(n(191),n(20)),i=n.n(c),u=n(66),l=n(4),p=n(5),m=n(9),f=n(7),h=n(10),y=(n(193),n(194),n(67)),b=n.n(y),d=[{constant:!0,inputs:[],name:"manager",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"winner",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"",type:"uint256"}],name:"players",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{inputs:[],payable:!1,stateMutability:"nonpayable",type:"constructor"},{constant:!1,inputs:[],name:"enter",outputs:[],payable:!0,stateMutability:"payable",type:"function"},{constant:!1,inputs:[],name:"pickWinner",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"getPlayerCnt",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"}],v=function(t){function e(t){var n;return Object(l.a)(this,e),(n=Object(m.a)(this,Object(f.a)(e).call(this,t))).onSubmit=function(){var t=Object(u.a)(i.a.mark(function t(e){var a;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.preventDefault(),t.next=3,n.state.web3.eth.getAccounts();case 3:return a=t.sent,n.setState({message:"Waiting on transaction success..."}),t.next=7,n.state.lottery.methods.enter().send({from:a[1],value:n.state.web3.utils.toWei(n.state.value,"ether")});case 7:n.setState({message:"You have been entered!"});case 8:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),n.onClick=Object(u.a)(i.a.mark(function t(){var e;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.state.web3.eth.getAccounts();case 2:return e=t.sent,n.setState({message:"Waiting on transaction success..."}),t.next=6,n.state.lottery.methods.pickWinner().send({from:e[0]});case 6:n.setState({message:"A winner has been picked!"});case 7:case"end":return t.stop()}},t)})),n.state={manager:"",players:[],balance:"",value:"",message:""},n.loadData(),n}return Object(h.a)(e,t),Object(p.a)(e,[{key:"loadData",value:function(){var t=Object(u.a)(i.a.mark(function t(){var e,n,a,r,s,o,c;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=new b.a(new b.a.providers.HttpProvider("http://localhost:7545")),n=new e.eth.Contract(d,"0x4B7CD5564a31a5029314d2a985FAC8d573496543"),t.next=4,e.eth.getBalance("0x4B7CD5564a31a5029314d2a985FAC8d573496543");case 4:return a=t.sent,console.log(a),t.next=8,n.methods.manager().call();case 8:return r=t.sent,t.next=11,n.methods.getPlayerCnt().call();case 11:s=t.sent,o=[],c=0;case 14:if(!(c<s)){t.next=21;break}return t.next=17,n.methods.players(c).call();case 17:o[c]=t.sent;case 18:c++,t.next=14;break;case 21:0===s&&(console.log("no players now"),o=[]),this.setState({manager:r,players:o,balance:a}),this.setState({web3:e}),this.setState({lottery:n});case 25:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"render",value:function(){var t=this;return r.a.createElement("div",null,r.a.createElement("h2",null,"Lottery Contract"),r.a.createElement("p",null,"This contract is managed by ",this.state.manager,". ",r.a.createElement("br",null)," ",r.a.createElement("br",null),"There are currently ",this.state.players.length," people entered, ",r.a.createElement("br",null),"competing to win ",b.a.utils.fromWei(this.state.balance,"ether")," ether!"),r.a.createElement("hr",null),r.a.createElement("form",{onSubmit:this.onSubmit},r.a.createElement("h4",null,"Want to try your luck?"),r.a.createElement("div",null,r.a.createElement("label",null,"Amount of ether to enter"),r.a.createElement("input",{value:this.state.value,onChange:function(e){return t.setState({value:e.target.value})}})),r.a.createElement("button",null,"Enter")),r.a.createElement("hr",null),r.a.createElement("h4",null,"Ready to pick a winner?"),r.a.createElement("button",{onClick:this.onClick},"Pick a winner!"),r.a.createElement("hr",null),r.a.createElement("h1",null,this.state.message))}}]),e}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(v,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})}},[[186,1,2]]]);
//# sourceMappingURL=main.15b153a4.chunk.js.map